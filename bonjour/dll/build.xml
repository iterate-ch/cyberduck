<project name="Cyberduck.Bonjour" basedir=".">

    <import file="../../build.xml"/>

    <condition property="msbuild.configuration" value="Debug">
        <equals arg1="${configuration}" arg2="debug" />
    </condition>
    <condition property="msbuild.configuration" value="Release">
        <equals arg1="${configuration}" arg2="release" />
    </condition>

    <target name="init-msbuild">
        <taskdef name="msbuild"
                 classname="org.apache.ant.dotnet.build.MSBuildTask">
            <classpath path="${lib.ext}/ant-dotnet-1.1.jar"/>
        </taskdef>
    </target>

    <target name="restore" depends="init-msbuild">
        <msbuild buildfile="${module}\Cyberduck.Bonjour.msbuildproj">
            <target name="Restore" />
        </msbuild>
    </target>

    <target name="build-windows" depends="init-msbuild,version,restore" if="platform.windows">
        <msbuild buildfile="${home}\Cyberduck.sln">
            <target name="src\libs\Cyberduck_Bonjour" />

            <property name="Configuration" value="${msbuild.configuration}" />
            <property name="Copyright" value="${copyright}" />
            <property name="Version" value="${version}.${revision}" />
        </msbuild>
    </target>

    <target name="_build" depends="build-windows" />

    <target name="build" depends="_build,version" />
</project>
